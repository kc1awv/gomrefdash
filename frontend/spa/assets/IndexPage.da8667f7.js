import{c as b,b as k,i as _,R as Q}from"./QBtn.8870a0ec.js";import{u as B,a as C,Q as L,b as w,c as $,d as D,e as M}from"./compiler-core.esm-bundler.3343efc5.js";import{c as S,h as I,g as z,_ as P,A as T,r as R,B as n,Q as h,H as t,F as r,D as l,G as v,R as m,S as f,I as i,C as x,w as j}from"./index.adbce45c.js";import{a as g,l as F,i as N}from"./axios.df14c455.js";var y=b({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const a=S(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>I(e.tag,{class:a.value},k(o.default))}}),q=b({name:"QCard",props:{...B,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:a}}=z(),d=C(e,a),c=S(()=>"q-card"+(d.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>I(e.tag,{class:c.value},k(o.default))}});const V=T({data(){return{name:"M17 Dashboard",station_rows:[],modules:[],pagination:R({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(e,o,a){clearInterval(this.intervalId),a()},methods:{fetchMetadata(){let e="/json/metadata";g.get(e).then(o=>{this.metadata=o.data}).catch(o=>{console.error(o)})},fetchStationsList(){let e="/json/stations";g.get(e).then(a=>{let d=a.data;d.stations.forEach(function(c,u){c.id=u+1,c.lastheardlocal=F(c.lastheard),c.txactive=N(c.lastheard),d.stations[u]=c}),this.station_rows=d.stations,d.stations.length>0&&(d.stations[0].txactive==!0?this.name="TX: "+d.stations[0].callsign:this.name=this.metadata.reflector_callsign+" Dashboard",document.title=this.name)}).catch(a=>{console.error(a)});let o="/json/modulesinuse";g.get(o).then(a=>{this.modules=a.data}).catch(a=>{console.error(a)})}}}),A={class:"q-pa-sm"},E={class:"row"},H={class:"col-xs-12 col-sm-10 col-md-8"},G={class:"q-pa-md"},O=t("th",{class:"gt-xs text-right",style:{"max-width":"50px"}},"#",-1),U=t("th",{class:"text-center",style:{"max-width":"50px"}},"Flag",-1),X={class:"text-center",style:{"max-width":"150px"}},J=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Suf",-1),K=t("th",{class:"gt-xs text-left",style:{"max-width":"100px"}},"Link/Peer",-1),W=t("th",{class:"text-left",style:{"max-width":"50px"}},"Mod",-1),Y=t("th",{class:"text-left",style:{"max-width":"150px"}},"Last Heard",-1),Z={class:"gt-xs text-right",style:{"max-width":"50px"}},tt={class:"text-center",style:{"max-width":"50px"}},et=["src"],st={class:"text-center",style:{"max-width":"150px"}},at={class:"gt-xs text-left",style:{"max-width":"50px"}},lt={class:"gt-xs text-left",style:{"max-width":"100px"}},ot={class:"text-left",style:{"max-width":"50px"}},rt={class:"text-left",style:{"max-width":"150px"}},dt={class:"col-xs-12 col-sm-5 col-md-4"},ct={class:"q-pa-sm"},nt=t("div",{align:"center"},"Modules In Use",-1),it={class:"q-pa-sm"},ht={class:"row"},ut={class:"text-h6"};function _t(e,o,a,d,c,u){return n(),h("div",A,[t("div",E,[t("div",H,[t("div",G,[r(L,null,{default:l(()=>[t("thead",null,[t("tr",null,[O,U,t("th",X,[r(_,{flat:"","no-caps":""},{default:l(()=>[v("Callsign")]),_:1})]),J,K,W,Y])]),t("tbody",null,[(n(!0),h(m,null,f(e.station_rows,s=>(n(),h("tr",{key:s},[t("td",Z,i(s.id),1),t("td",tt,[t("img",{width:"30",src:`/flags/${s.country.countrycode}.png`},null,8,et)]),t("td",st,[s.txactive==!0?(n(),x(_,{key:0,"icon-right":"campaign",color:"red","text-color":"white",href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,i(s.callsign),1)]),_:2},1032,["href"])):(n(),x(_,{key:1,flat:"",href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,i(s.callsign),1)]),_:2},1032,["href"]))]),t("td",at,i(s.callsignsuffix),1),t("td",lt,i(s.vianode),1),t("td",ot,i(s.onmodule),1),t("td",rt,i(s.lastheardlocal),1)]))),128))])]),_:1})])]),t("div",dt,[t("div",ct,[r(q,null,{default:l(()=>[r(y,null,{default:l(()=>[nt,t("div",it,[t("div",ht,[(n(!0),h(m,null,f(e.modules,s=>(n(),h("div",{class:"col-6 q-pa-sm",key:s.name},[r(q,{class:"mycard"},{default:l(()=>[r(y,null,{default:l(()=>[r(w,{header:"",align:"center"},{default:l(()=>[t("div",ut,i(s.name),1)]),_:2},1024),r(w,{align:"center"},{default:l(()=>[r($,{bordered:"",separator:""},{default:l(()=>[(n(!0),h(m,null,f(s.callsigns,p=>j((n(),x(D,{clickable:"",key:p},{default:l(()=>[r(M,null,{default:l(()=>[v(i(p),1)]),_:2},1024)]),_:2},1024)),[[Q]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var pt=P(V,[["render",_t]]);export{pt as default};
